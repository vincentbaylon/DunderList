{"ast":null,"code":"import _slicedToArray from\"/Users/vinceboogie/Development/DunderList/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import{Link}from'react-router-dom';import{useState}from'react';import CartCard from'./CartCard';import states from'../Data/states';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var paypalStyle={width:\"23px\"};var googleStyle={width:\"28px\"};var appleStyle={width:\"30px\"};var hrStyle={width:\"50%\"};var linkStyle={textDecoration:'underline'};var SalesTax=require(\"sales-tax\");function Cart(_ref){var cart=_ref.cart,products=_ref.products,removeFromCart=_ref.removeFromCart,setCart=_ref.setCart,currentUser=_ref.currentUser;SalesTax.setTaxOriginCountry(\"US\");var _useState=useState(''),_useState2=_slicedToArray(_useState,2),taxFilter=_useState2[0],setTaxFilter=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),tax=_useState4[0],setTax=_useState4[1];var filterProduct=products.filter(function(eachProduct){return cart.includes(eachProduct.id);});var displayProduct=filterProduct.map(function(eachFiltered){return/*#__PURE__*/_jsx(CartCard,{product:eachFiltered,removeFromCart:removeFromCart},eachFiltered.id);});var totalCost=Number.parseFloat(filterProduct.reduce(function(accum,product){return product.price+accum;},0)).toFixed(2);var taxTotal=Number.parseFloat(tax*totalCost).toFixed(2);var totalWithTax=Number.parseFloat(+totalCost+ +taxTotal).toFixed(2);function handleClick(){if(cart.length>0){if(currentUser!==null){if(taxFilter===''){alert(\"Select your state.\");}else{alert(\"Thank you for your purchase!\");products.forEach(function(eachProduct){if(cart.includes(eachProduct.id)){eachProduct.inStock=false;fetch(\"http://localhost:3000/products/\".concat(eachProduct.id),{method:'PATCH',headers:{'Content-Type':'application/json'},body:JSON.stringify({'inStock':false})}).then(function(res){return res.json();}).then(function(){setCart([]);fetch(\"http://localhost:3000/users/\".concat(currentUser.user.id),{method:'PATCH',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(currentUser.accessToken)},body:JSON.stringify({\"cart\":[]})});});}});}}else{alert(\"Login to complete your purchase.\");}}}var stateCodes=states.map(function(eachState){return/*#__PURE__*/_jsx(\"option\",{value:eachState,children:eachState},eachState);});function handleChange(e){setTaxFilter(e.target.value);SalesTax.getSalesTax(\"US\",\"\".concat(e.target.value)).then(function(tax){return setTax(tax.rate);});}var emptyCart=function emptyCart(){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{children:\"Your cart is empty\"}),/*#__PURE__*/_jsx(Link,{to:\"/\",style:linkStyle,children:\"Get back to shopping\"})]});};return/*#__PURE__*/_jsxs(\"div\",{className:\"ui center aligned container\",children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"h2\",{children:\"Your Cart\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"ui one column center aligned grid\",children:cart.length>0?displayProduct:emptyCart()}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"ui basic segment\",children:[/*#__PURE__*/_jsxs(\"select\",{name:\"tax-filter\",id:\"tax-filter\",\"aria-label\":\"tax filter\",className:\"ui compact selection dropdown\",onChange:handleChange,value:taxFilter,children:[/*#__PURE__*/_jsx(\"option\",{value:\"all\",children:\"State\"}),stateCodes]}),/*#__PURE__*/_jsxs(\"h4\",{children:[\"Tax (\",tax*100,\"%):\\xA0\\xA0\\xA0\\xA0 $\",taxTotal]}),/*#__PURE__*/_jsxs(\"h3\",{children:[\"Total:\\xA0\\xA0\\xA0\\xA0 $\",totalWithTax]})]}),/*#__PURE__*/_jsx(\"hr\",{style:hrStyle}),/*#__PURE__*/_jsx(\"h5\",{children:\"Express Checkout\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"ui one row center aligned grid\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"ui basic button\",children:/*#__PURE__*/_jsx(\"img\",{src:\"./paypal.png\",onClick:handleClick,style:paypalStyle})}),/*#__PURE__*/_jsx(\"button\",{className:\"ui basic button\",children:/*#__PURE__*/_jsx(\"img\",{src:\"./google.png\",onClick:handleClick,style:googleStyle})}),/*#__PURE__*/_jsx(\"button\",{className:\"ui basic button\",children:/*#__PURE__*/_jsx(\"img\",{src:\"./apple.png\",onClick:handleClick,style:appleStyle})})]})]});}export default Cart;","map":{"version":3,"sources":["/Users/vinceboogie/Development/DunderList/src/Components/Cart.js"],"names":["React","Link","useState","CartCard","states","paypalStyle","width","googleStyle","appleStyle","hrStyle","linkStyle","textDecoration","SalesTax","require","Cart","cart","products","removeFromCart","setCart","currentUser","setTaxOriginCountry","taxFilter","setTaxFilter","tax","setTax","filterProduct","filter","eachProduct","includes","id","displayProduct","map","eachFiltered","totalCost","Number","parseFloat","reduce","accum","product","price","toFixed","taxTotal","totalWithTax","handleClick","length","alert","forEach","inStock","fetch","method","headers","body","JSON","stringify","then","res","json","user","accessToken","stateCodes","eachState","handleChange","e","target","value","getSalesTax","rate","emptyCart"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { Link } from 'react-router-dom'\nimport { useState } from 'react'\nimport CartCard from './CartCard'\nimport states from '../Data/states'\n\nconst paypalStyle = {\n    width: \"23px\"\n}\n\nconst googleStyle = {\n    width: \"28px\"\n}\n\nconst appleStyle = {\n    width: \"30px\"\n}\n\nconst hrStyle = {\n    width: \"50%\"\n}\n\nconst linkStyle = {\n    textDecoration: 'underline'\n}\n\nconst SalesTax = require(\"sales-tax\")\n\nfunction Cart({ cart, products, removeFromCart, setCart, currentUser }) {\n    SalesTax.setTaxOriginCountry(\"US\")\n\n    const [taxFilter, setTaxFilter] = useState('')\n    const [tax, setTax] = useState(0)\n\n    const filterProduct = products.filter((eachProduct) => {\n        return cart.includes(eachProduct.id)\n    })\n    \n    const displayProduct = filterProduct.map((eachFiltered) => {\n        return <CartCard key={eachFiltered.id} product={eachFiltered} removeFromCart={removeFromCart} />\n    })\n\n    const totalCost = Number.parseFloat(filterProduct.reduce((accum, product)=> {\n        return product.price + accum}, 0)).toFixed(2)\n\n    const taxTotal = Number.parseFloat(tax * totalCost).toFixed(2)\n    const totalWithTax = Number.parseFloat(+totalCost + +taxTotal).toFixed(2)\n    \n    function handleClick() {\n        if (cart.length > 0) {\n            if (currentUser !== null) {\n                if (taxFilter === '') {\n                    alert(\"Select your state.\")\n                } else {\n                    alert(\"Thank you for your purchase!\")\n    \n                    products.forEach((eachProduct) => {\n                        if (cart.includes(eachProduct.id)) {\n                            eachProduct.inStock = false\n        \n                            fetch(`http://localhost:3000/products/${eachProduct.id}`, {\n                                method: 'PATCH',\n                                headers: {\n                                    'Content-Type': 'application/json'\n                                },\n                                body: JSON.stringify({\n                                    'inStock': false\n                                })\n                            })\n                            .then(res => res.json())\n                            .then(() => {\n                                setCart([])\n                                fetch(`http://localhost:3000/users/${currentUser.user.id}`, {\n                                    method: 'PATCH',\n                                    headers: {\n                                      'Content-Type': 'application/json',\n                                      'Authorization': `Bearer ${currentUser.accessToken}`\n                                    },\n                                    body: JSON.stringify({\n                                      \"cart\": []\n                                    })\n                                  })\n                            })\n                        }\n                    })\n                }\n            } else {\n                alert(\"Login to complete your purchase.\")\n            }\n        }\n    }\n\n    const stateCodes = states.map((eachState) => {\n        return (\n            <option value={eachState} key={eachState}>{eachState}</option> \n        )\n    })\n\n    function handleChange(e) {\n        setTaxFilter(e.target.value)\n\n        SalesTax.getSalesTax(\"US\", `${e.target.value}`)\n        .then(tax => setTax(tax.rate))\n    }\n\n    const emptyCart = () => {\n        return (\n            <div>\n            <p>Your cart is empty</p>\n            <Link to='/' style={linkStyle}>Get back to shopping</Link>\n            </div>\n        )\n    }\n\n\nreturn (\n    <div className=\"ui center aligned container\">\n        <br></br>\n        <h2>Your Cart</h2>\n        <br></br>\n        <div className=\"ui one column center aligned grid\">\n            {(cart.length > 0) ? displayProduct : emptyCart()}\n        </div>\n        <br></br>\n        <div className=\"ui basic segment\">\n            <select \n                name=\"tax-filter\" \n                id=\"tax-filter\" \n                aria-label=\"tax filter\" \n                className=\"ui compact selection dropdown\"\n                onChange={handleChange}\n                value={taxFilter}\n            >\n                <option value=\"all\">State</option>\n                {stateCodes}\n            </select>\n\n            <h4>Tax ({tax*100}%):&nbsp;&nbsp;&nbsp;&nbsp; ${taxTotal}</h4>\n            <h3>Total:&nbsp;&nbsp;&nbsp;&nbsp; ${totalWithTax}</h3>\n        </div>\n        <hr style={hrStyle}></hr>\n        <h5>Express Checkout</h5>\n        <br></br>\n        <div className=\"ui one row center aligned grid\">\n            <button className=\"ui basic button\"><img src=\"./paypal.png\" onClick={handleClick} style={paypalStyle}/></button>\n            <button className=\"ui basic button\"><img src=\"./google.png\" onClick={handleClick} style={googleStyle}/></button>\n            <button className=\"ui basic button\"><img src=\"./apple.png\" onClick={handleClick} style={appleStyle}/></button>\n        </div>\n        \n    </div>\n)\n}\n\nexport default Cart"]},"metadata":{},"sourceType":"module"}