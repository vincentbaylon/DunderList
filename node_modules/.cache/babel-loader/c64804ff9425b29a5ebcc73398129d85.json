{"ast":null,"code":"import _toConsumableArray from\"/Users/vinceboogie/Development/DunderList/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/vinceboogie/Development/DunderList/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Route,Switch,useLocation}from'react-router-dom';import React,{useEffect,useState}from'react';import{Sticky}from'semantic-ui-react';import Header from'./Header';import Shop from'./Shop';import Sell from'./Sell';import About from'./About';import Cart from'./Cart';import Login from'./Login';import shopProducts from'../Data/shopProducts';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState(shopProducts),_useState2=_slicedToArray(_useState,2),products=_useState2[0],setProducts=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),filter=_useState4[0],setFilter=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),search=_useState6[0],setSearch=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),sort=_useState8[0],setSort=_useState8[1];var _useState9=useState('all'),_useState10=_slicedToArray(_useState9,2),sellerFilter=_useState10[0],setSellerFilter=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),cart=_useState12[0],setCart=_useState12[1];var _useState13=useState([]),_useState14=_slicedToArray(_useState13,2),likes=_useState14[0],setLikes=_useState14[1];var _useState15=useState([]),_useState16=_slicedToArray(_useState15,2),sellers=_useState16[0],setSellers=_useState16[1];var _useState17=useState(null),_useState18=_slicedToArray(_useState17,2),currentUser=_useState18[0],setCurrentUser=_useState18[1];var _useState19=useState(false),_useState20=_slicedToArray(_useState19,2),loggedIn=_useState20[0],setLoggedIn=_useState20[1];var location=useLocation();var sellerNames=sellers.map(function(seller){return seller.name;});useEffect(function(){// fetch(`http://localhost:3000/products`)\n// \t.then((res) => res.json())\n// \t.then(setProducts)\nconsole.log(products);},[]);useEffect(function(){fetch(\"https://api.tvmaze.com/shows/526/cast\").then(function(res){return res.json();}).then(function(data){setSellers(data.map(function(item){return item.character;}));});},[]);useEffect(function(){if(loggedIn){fetch(\"http://localhost:3000/users/\".concat(currentUser.user.id)).then(function(res){return res.json();}).then(function(user){if(user.cart!==undefined&&cart.length===0){setCart(user.cart);}else{fetch(\"http://localhost:3000/users/\".concat(currentUser.user.id),{method:'PATCH',headers:{'Content-Type':'application/json',Authorization:\"Bearer \".concat(currentUser.accessToken)},body:JSON.stringify({cart:cart})}).then(function(res){return res.json();}).then(function(data){return data;});}if(user.likes!==undefined){setLikes(user.likes);setProducts(products);}});}},[loggedIn]);useEffect(function(){if(sellerFilter!=='all'&&location.pathname!=='/'){setSellerFilter('all');}},[location]);function addProduct(newProduct){setProducts([].concat(_toConsumableArray(products),[newProduct]));}function addToCart(id){if(cart.includes(id))setCart(cart);else setCart([].concat(_toConsumableArray(cart),[id]));if(loggedIn){var updateCart=[].concat(_toConsumableArray(cart),[id]);fetch(\"http://localhost:3000/users/\".concat(currentUser.user.id),{method:'PATCH',headers:{'Content-Type':'application/json',Authorization:\"Bearer \".concat(currentUser.accessToken)},body:JSON.stringify({cart:updateCart})}).then(function(res){return res.json();}).then(function(data){return data;});}}function removeFromCart(id){var updatedCart=cart.filter(function(item){return item!==id;});setCart(updatedCart);if(loggedIn){fetch(\"http://localhost:3000/users/\".concat(currentUser.user.id),{method:'PATCH',headers:{'Content-Type':'application/json',Authorization:\"Bearer \".concat(currentUser.accessToken)},body:JSON.stringify({cart:updatedCart})}).then(function(res){return res.json();}).then(function(data){return data;});}}function addLikes(id){if(loggedIn){var updateLikes=[].concat(_toConsumableArray(likes),[id]);fetch(\"http://localhost:3000/users/\".concat(currentUser.user.id),{method:'PATCH',headers:{'Content-Type':'application/json',Authorization:\"Bearer \".concat(currentUser.accessToken)},body:JSON.stringify({likes:updateLikes})}).then(function(res){return res.json();}).then(function(){return setLikes([].concat(_toConsumableArray(likes),[id]));});}else{alert('Login to like an item.');}}function removeLikes(id){if(loggedIn){var updateLikes=likes.filter(function(item){return item!==id;});fetch(\"http://localhost:3000/users/\".concat(currentUser.user.id),{method:'PATCH',headers:{'Content-Type':'application/json',Authorization:\"Bearer \".concat(currentUser.accessToken)},body:JSON.stringify({likes:updateLikes})}).then(function(res){return res.json();}).then(function(){return setLikes(updateLikes);});}}var displayProducts=products.filter(function(eachProduct){if(filter.length<1){return eachProduct;}else{return filter.includes(eachProduct.category);}}).filter(function(eachProduct){if(sellerFilter!=='all'){return eachProduct.seller===sellerFilter;}else{return eachProduct;}}).filter(function(eachProduct){if(search){return eachProduct.title.toLowerCase().includes(search.toLowerCase());}else{return eachProduct;}}).sort(function(firstProduct,secondProduct){if(sort==='relevant'){if(firstProduct.id>firstProduct.id)return-1;}else if(sort==='priceHighLow'){if(firstProduct.price>secondProduct.price)return-1;}else if(sort==='priceLowHigh'){if(firstProduct.price<secondProduct.price)return-1;}});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Sticky,{children:/*#__PURE__*/_jsx(Header,{cart:cart,loggedIn:loggedIn,setCurrentUser:setCurrentUser,setLoggedIn:setLoggedIn,setCart:setCart,setLikes:setLikes})}),/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{path:\"/sell\",children:/*#__PURE__*/_jsx(Sell,{addProduct:addProduct,sellerNames:sellerNames,currentUser:currentUser})}),/*#__PURE__*/_jsx(Route,{path:\"/about\",children:/*#__PURE__*/_jsx(About,{sellers:sellers,setSellerFilter:setSellerFilter,products:products})}),/*#__PURE__*/_jsx(Route,{path:\"/cart\",children:/*#__PURE__*/_jsx(Cart,{cart:cart,products:products,removeFromCart:removeFromCart,setCart:setCart,currentUser:currentUser})}),/*#__PURE__*/_jsx(Route,{path:\"/login\",children:/*#__PURE__*/_jsx(Login,{setCurrentUser:setCurrentUser,setLoggedIn:setLoggedIn})}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/\",children:/*#__PURE__*/_jsx(Shop,{products:displayProducts,setFilter:setFilter,filter:filter,search:search,setSearch:setSearch,addToCart:addToCart,removeFromCart:removeFromCart,setSort:setSort,cart:cart,sellerNames:sellerNames,setSellerFilter:setSellerFilter,sellerFilter:sellerFilter,addLikes:addLikes,likes:likes,removeLikes:removeLikes})})]})]});}export default App;","map":{"version":3,"sources":["/Users/vinceboogie/Development/DunderList/src/Components/App.js"],"names":["Route","Switch","useLocation","React","useEffect","useState","Sticky","Header","Shop","Sell","About","Cart","Login","shopProducts","App","products","setProducts","filter","setFilter","search","setSearch","sort","setSort","sellerFilter","setSellerFilter","cart","setCart","likes","setLikes","sellers","setSellers","currentUser","setCurrentUser","loggedIn","setLoggedIn","location","sellerNames","map","seller","name","console","log","fetch","then","res","json","data","item","character","user","id","undefined","length","method","headers","Authorization","accessToken","body","JSON","stringify","pathname","addProduct","newProduct","addToCart","includes","updateCart","removeFromCart","updatedCart","addLikes","updateLikes","alert","removeLikes","displayProducts","eachProduct","category","title","toLowerCase","firstProduct","secondProduct","price"],"mappings":"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","sourcesContent":["import { Route, Switch, useLocation } from 'react-router-dom'\nimport React, { useEffect, useState } from 'react'\nimport { Sticky } from 'semantic-ui-react'\nimport Header from './Header'\nimport Shop from './Shop'\nimport Sell from './Sell'\nimport About from './About'\nimport Cart from './Cart'\nimport Login from './Login'\nimport shopProducts from '../Data/shopProducts'\n\nfunction App() {\n\tconst [products, setProducts] = useState(shopProducts)\n\tconst [filter, setFilter] = useState([])\n\tconst [search, setSearch] = useState('')\n\tconst [sort, setSort] = useState('')\n\tconst [sellerFilter, setSellerFilter] = useState('all')\n\tconst [cart, setCart] = useState([])\n\tconst [likes, setLikes] = useState([])\n\tconst [sellers, setSellers] = useState([])\n\tconst [currentUser, setCurrentUser] = useState(null)\n\tconst [loggedIn, setLoggedIn] = useState(false)\n\tconst location = useLocation()\n\n\tconst sellerNames = sellers.map((seller) => seller.name)\n\n\tuseEffect(() => {\n\t\t// fetch(`http://localhost:3000/products`)\n\t\t// \t.then((res) => res.json())\n\t\t// \t.then(setProducts)\n\t\tconsole.log(products)\n\t}, [])\n\n\tuseEffect(() => {\n\t\tfetch(`https://api.tvmaze.com/shows/526/cast`)\n\t\t\t.then((res) => res.json())\n\t\t\t.then((data) => {\n\t\t\t\tsetSellers(data.map((item) => item.character))\n\t\t\t})\n\t}, [])\n\n\tuseEffect(() => {\n\t\tif (loggedIn) {\n\t\t\tfetch(`http://localhost:3000/users/${currentUser.user.id}`)\n\t\t\t\t.then((res) => res.json())\n\t\t\t\t.then((user) => {\n\t\t\t\t\tif (user.cart !== undefined && cart.length === 0) {\n\t\t\t\t\t\tsetCart(user.cart)\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfetch(`http://localhost:3000/users/${currentUser.user.id}`, {\n\t\t\t\t\t\t\tmethod: 'PATCH',\n\t\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t\t\t\tAuthorization: `Bearer ${currentUser.accessToken}`,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\t\t\t\tcart: cart,\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.then((res) => res.json())\n\t\t\t\t\t\t\t.then((data) => data)\n\t\t\t\t\t}\n\t\t\t\t\tif (user.likes !== undefined) {\n\t\t\t\t\t\tsetLikes(user.likes)\n\t\t\t\t\t\tsetProducts(products)\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t}\n\t}, [loggedIn])\n\n\tuseEffect(() => {\n\t\tif (sellerFilter !== 'all' && location.pathname !== '/') {\n\t\t\tsetSellerFilter('all')\n\t\t}\n\t}, [location])\n\n\tfunction addProduct(newProduct) {\n\t\tsetProducts([...products, newProduct])\n\t}\n\n\tfunction addToCart(id) {\n\t\tif (cart.includes(id)) setCart(cart)\n\t\telse setCart([...cart, id])\n\n\t\tif (loggedIn) {\n\t\t\tconst updateCart = [...cart, id]\n\t\t\tfetch(`http://localhost:3000/users/${currentUser.user.id}`, {\n\t\t\t\tmethod: 'PATCH',\n\t\t\t\theaders: {\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\tAuthorization: `Bearer ${currentUser.accessToken}`,\n\t\t\t\t},\n\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\tcart: updateCart,\n\t\t\t\t}),\n\t\t\t})\n\t\t\t\t.then((res) => res.json())\n\t\t\t\t.then((data) => data)\n\t\t}\n\t}\n\n\tfunction removeFromCart(id) {\n\t\tconst updatedCart = cart.filter((item) => item !== id)\n\t\tsetCart(updatedCart)\n\n\t\tif (loggedIn) {\n\t\t\tfetch(`http://localhost:3000/users/${currentUser.user.id}`, {\n\t\t\t\tmethod: 'PATCH',\n\t\t\t\theaders: {\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\tAuthorization: `Bearer ${currentUser.accessToken}`,\n\t\t\t\t},\n\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\tcart: updatedCart,\n\t\t\t\t}),\n\t\t\t})\n\t\t\t\t.then((res) => res.json())\n\t\t\t\t.then((data) => data)\n\t\t}\n\t}\n\n\tfunction addLikes(id) {\n\t\tif (loggedIn) {\n\t\t\tconst updateLikes = [...likes, id]\n\t\t\tfetch(`http://localhost:3000/users/${currentUser.user.id}`, {\n\t\t\t\tmethod: 'PATCH',\n\t\t\t\theaders: {\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\tAuthorization: `Bearer ${currentUser.accessToken}`,\n\t\t\t\t},\n\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\tlikes: updateLikes,\n\t\t\t\t}),\n\t\t\t})\n\t\t\t\t.then((res) => res.json())\n\t\t\t\t.then(() => setLikes([...likes, id]))\n\t\t} else {\n\t\t\talert('Login to like an item.')\n\t\t}\n\t}\n\n\tfunction removeLikes(id) {\n\t\tif (loggedIn) {\n\t\t\tconst updateLikes = likes.filter((item) => item !== id)\n\t\t\tfetch(`http://localhost:3000/users/${currentUser.user.id}`, {\n\t\t\t\tmethod: 'PATCH',\n\t\t\t\theaders: {\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\tAuthorization: `Bearer ${currentUser.accessToken}`,\n\t\t\t\t},\n\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\tlikes: updateLikes,\n\t\t\t\t}),\n\t\t\t})\n\t\t\t\t.then((res) => res.json())\n\t\t\t\t.then(() => setLikes(updateLikes))\n\t\t}\n\t}\n\n\tconst displayProducts = products\n\t\t.filter((eachProduct) => {\n\t\t\tif (filter.length < 1) {\n\t\t\t\treturn eachProduct\n\t\t\t} else {\n\t\t\t\treturn filter.includes(eachProduct.category)\n\t\t\t}\n\t\t})\n\t\t.filter((eachProduct) => {\n\t\t\tif (sellerFilter !== 'all') {\n\t\t\t\treturn eachProduct.seller === sellerFilter\n\t\t\t} else {\n\t\t\t\treturn eachProduct\n\t\t\t}\n\t\t})\n\t\t.filter((eachProduct) => {\n\t\t\tif (search) {\n\t\t\t\treturn eachProduct.title.toLowerCase().includes(search.toLowerCase())\n\t\t\t} else {\n\t\t\t\treturn eachProduct\n\t\t\t}\n\t\t})\n\t\t.sort((firstProduct, secondProduct) => {\n\t\t\tif (sort === 'relevant') {\n\t\t\t\tif (firstProduct.id > firstProduct.id) return -1\n\t\t\t} else if (sort === 'priceHighLow') {\n\t\t\t\tif (firstProduct.price > secondProduct.price) return -1\n\t\t\t} else if (sort === 'priceLowHigh') {\n\t\t\t\tif (firstProduct.price < secondProduct.price) return -1\n\t\t\t}\n\t\t})\n\n\treturn (\n\t\t<div>\n\t\t\t<Sticky>\n\t\t\t\t<Header\n\t\t\t\t\tcart={cart}\n\t\t\t\t\tloggedIn={loggedIn}\n\t\t\t\t\tsetCurrentUser={setCurrentUser}\n\t\t\t\t\tsetLoggedIn={setLoggedIn}\n\t\t\t\t\tsetCart={setCart}\n\t\t\t\t\tsetLikes={setLikes}\n\t\t\t\t/>\n\t\t\t</Sticky>\n\n\t\t\t<Switch>\n\t\t\t\t<Route path='/sell'>\n\t\t\t\t\t<Sell\n\t\t\t\t\t\taddProduct={addProduct}\n\t\t\t\t\t\tsellerNames={sellerNames}\n\t\t\t\t\t\tcurrentUser={currentUser}\n\t\t\t\t\t/>\n\t\t\t\t</Route>\n\t\t\t\t<Route path='/about'>\n\t\t\t\t\t<About\n\t\t\t\t\t\tsellers={sellers}\n\t\t\t\t\t\tsetSellerFilter={setSellerFilter}\n\t\t\t\t\t\tproducts={products}\n\t\t\t\t\t/>\n\t\t\t\t</Route>\n\t\t\t\t<Route path='/cart'>\n\t\t\t\t\t<Cart\n\t\t\t\t\t\tcart={cart}\n\t\t\t\t\t\tproducts={products}\n\t\t\t\t\t\tremoveFromCart={removeFromCart}\n\t\t\t\t\t\tsetCart={setCart}\n\t\t\t\t\t\tcurrentUser={currentUser}\n\t\t\t\t\t/>\n\t\t\t\t</Route>\n\t\t\t\t<Route path='/login'>\n\t\t\t\t\t<Login setCurrentUser={setCurrentUser} setLoggedIn={setLoggedIn} />\n\t\t\t\t</Route>\n\t\t\t\t<Route exact path='/'>\n\t\t\t\t\t<Shop\n\t\t\t\t\t\tproducts={displayProducts}\n\t\t\t\t\t\tsetFilter={setFilter}\n\t\t\t\t\t\tfilter={filter}\n\t\t\t\t\t\tsearch={search}\n\t\t\t\t\t\tsetSearch={setSearch}\n\t\t\t\t\t\taddToCart={addToCart}\n\t\t\t\t\t\tremoveFromCart={removeFromCart}\n\t\t\t\t\t\tsetSort={setSort}\n\t\t\t\t\t\tcart={cart}\n\t\t\t\t\t\tsellerNames={sellerNames}\n\t\t\t\t\t\tsetSellerFilter={setSellerFilter}\n\t\t\t\t\t\tsellerFilter={sellerFilter}\n\t\t\t\t\t\taddLikes={addLikes}\n\t\t\t\t\t\tlikes={likes}\n\t\t\t\t\t\tremoveLikes={removeLikes}\n\t\t\t\t\t/>\n\t\t\t\t</Route>\n\t\t\t</Switch>\n\t\t</div>\n\t)\n}\n\nexport default App\n"]},"metadata":{},"sourceType":"module"}