{"ast":null,"code":"var _jsxFileName = \"/Users/vinceboogie/Development/DunderList/src/Components/App.js\",\n    _s = $RefreshSig$();\n\nimport { Route, Switch, useLocation } from 'react-router-dom';\nimport React, { useEffect, useState } from 'react';\nimport { Sticky } from 'semantic-ui-react';\nimport Header from './Header';\nimport Shop from './Shop';\nimport Sell from './Sell';\nimport About from './About';\nimport Cart from './Cart';\nimport Login from './Login';\nimport shopProducts from '../Data/shopProducts';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction App() {\n  _s();\n\n  const [products, setProducts] = useState([shopProducts]);\n  const [filter, setFilter] = useState([]);\n  const [search, setSearch] = useState('');\n  const [sort, setSort] = useState('');\n  const [sellerFilter, setSellerFilter] = useState('all');\n  const [cart, setCart] = useState([]);\n  const [likes, setLikes] = useState([]);\n  const [sellers, setSellers] = useState([]);\n  const [currentUser, setCurrentUser] = useState(null);\n  const [loggedIn, setLoggedIn] = useState(false);\n  const location = useLocation();\n  const sellerNames = sellers.map(seller => seller.name);\n  useEffect(() => {\n    fetch(`http://localhost:3000/products`).then(res => res.json()).then(setProducts);\n  }, []);\n  useEffect(() => {\n    fetch(`https://api.tvmaze.com/shows/526/cast`).then(res => res.json()).then(data => {\n      setSellers(data.map(item => item.character));\n    });\n  }, []);\n  useEffect(() => {\n    if (loggedIn) {\n      fetch(`http://localhost:3000/users/${currentUser.user.id}`).then(res => res.json()).then(user => {\n        if (user.cart !== undefined && cart.length === 0) {\n          setCart(user.cart);\n        } else {\n          fetch(`http://localhost:3000/users/${currentUser.user.id}`, {\n            method: 'PATCH',\n            headers: {\n              'Content-Type': 'application/json',\n              Authorization: `Bearer ${currentUser.accessToken}`\n            },\n            body: JSON.stringify({\n              cart: cart\n            })\n          }).then(res => res.json()).then(data => data);\n        }\n\n        if (user.likes !== undefined) {\n          setLikes(user.likes);\n          setProducts(products);\n        }\n      });\n    }\n  }, [loggedIn]);\n  useEffect(() => {\n    if (sellerFilter !== 'all' && location.pathname !== '/') {\n      setSellerFilter('all');\n    }\n  }, [location]);\n\n  function addProduct(newProduct) {\n    setProducts([...products, newProduct]);\n  }\n\n  function addToCart(id) {\n    if (cart.includes(id)) setCart(cart);else setCart([...cart, id]);\n\n    if (loggedIn) {\n      const updateCart = [...cart, id];\n      fetch(`http://localhost:3000/users/${currentUser.user.id}`, {\n        method: 'PATCH',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${currentUser.accessToken}`\n        },\n        body: JSON.stringify({\n          cart: updateCart\n        })\n      }).then(res => res.json()).then(data => data);\n    }\n  }\n\n  function removeFromCart(id) {\n    const updatedCart = cart.filter(item => item !== id);\n    setCart(updatedCart);\n\n    if (loggedIn) {\n      fetch(`http://localhost:3000/users/${currentUser.user.id}`, {\n        method: 'PATCH',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${currentUser.accessToken}`\n        },\n        body: JSON.stringify({\n          cart: updatedCart\n        })\n      }).then(res => res.json()).then(data => data);\n    }\n  }\n\n  function addLikes(id) {\n    if (loggedIn) {\n      const updateLikes = [...likes, id];\n      fetch(`http://localhost:3000/users/${currentUser.user.id}`, {\n        method: 'PATCH',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${currentUser.accessToken}`\n        },\n        body: JSON.stringify({\n          likes: updateLikes\n        })\n      }).then(res => res.json()).then(() => setLikes([...likes, id]));\n    } else {\n      alert('Login to like an item.');\n    }\n  }\n\n  function removeLikes(id) {\n    if (loggedIn) {\n      const updateLikes = likes.filter(item => item !== id);\n      fetch(`http://localhost:3000/users/${currentUser.user.id}`, {\n        method: 'PATCH',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${currentUser.accessToken}`\n        },\n        body: JSON.stringify({\n          likes: updateLikes\n        })\n      }).then(res => res.json()).then(() => setLikes(updateLikes));\n    }\n  }\n\n  const displayProducts = products.filter(eachProduct => {\n    if (filter.length < 1) {\n      return eachProduct;\n    } else {\n      return filter.includes(eachProduct.category);\n    }\n  }).filter(eachProduct => {\n    if (sellerFilter !== 'all') {\n      return eachProduct.seller === sellerFilter;\n    } else {\n      return eachProduct;\n    }\n  }).filter(eachProduct => {\n    if (search) {\n      return eachProduct.title.toLowerCase().includes(search.toLowerCase());\n    } else {\n      return eachProduct;\n    }\n  }).sort((firstProduct, secondProduct) => {\n    if (sort === 'relevant') {\n      if (firstProduct.id > firstProduct.id) return -1;\n    } else if (sort === 'priceHighLow') {\n      if (firstProduct.price > secondProduct.price) return -1;\n    } else if (sort === 'priceLowHigh') {\n      if (firstProduct.price < secondProduct.price) return -1;\n    }\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Sticky, {\n      children: /*#__PURE__*/_jsxDEV(Header, {\n        cart: cart,\n        loggedIn: loggedIn,\n        setCurrentUser: setCurrentUser,\n        setLoggedIn: setLoggedIn,\n        setCart: setCart,\n        setLikes: setLikes\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(Switch, {\n      children: [/*#__PURE__*/_jsxDEV(Route, {\n        path: \"/sell\",\n        children: /*#__PURE__*/_jsxDEV(Sell, {\n          addProduct: addProduct,\n          sellerNames: sellerNames,\n          currentUser: currentUser\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/about\",\n        children: /*#__PURE__*/_jsxDEV(About, {\n          sellers: sellers,\n          setSellerFilter: setSellerFilter,\n          products: products\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/cart\",\n        children: /*#__PURE__*/_jsxDEV(Cart, {\n          cart: cart,\n          products: products,\n          removeFromCart: removeFromCart,\n          setCart: setCart,\n          currentUser: currentUser\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/login\",\n        children: /*#__PURE__*/_jsxDEV(Login, {\n          setCurrentUser: setCurrentUser,\n          setLoggedIn: setLoggedIn\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        exact: true,\n        path: \"/\",\n        children: /*#__PURE__*/_jsxDEV(Shop, {\n          products: displayProducts,\n          setFilter: setFilter,\n          filter: filter,\n          search: search,\n          setSearch: setSearch,\n          addToCart: addToCart,\n          removeFromCart: removeFromCart,\n          setSort: setSort,\n          cart: cart,\n          sellerNames: sellerNames,\n          setSellerFilter: setSellerFilter,\n          sellerFilter: sellerFilter,\n          addLikes: addLikes,\n          likes: likes,\n          removeLikes: removeLikes\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 192,\n    columnNumber: 3\n  }, this);\n}\n\n_s(App, \"pAtLlr4d7sbVchRhQtyp0nRg/M0=\", false, function () {\n  return [useLocation];\n});\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["/Users/vinceboogie/Development/DunderList/src/Components/App.js"],"names":["Route","Switch","useLocation","React","useEffect","useState","Sticky","Header","Shop","Sell","About","Cart","Login","shopProducts","App","products","setProducts","filter","setFilter","search","setSearch","sort","setSort","sellerFilter","setSellerFilter","cart","setCart","likes","setLikes","sellers","setSellers","currentUser","setCurrentUser","loggedIn","setLoggedIn","location","sellerNames","map","seller","name","fetch","then","res","json","data","item","character","user","id","undefined","length","method","headers","Authorization","accessToken","body","JSON","stringify","pathname","addProduct","newProduct","addToCart","includes","updateCart","removeFromCart","updatedCart","addLikes","updateLikes","alert","removeLikes","displayProducts","eachProduct","category","title","toLowerCase","firstProduct","secondProduct","price"],"mappings":"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","sourcesContent":["import { Route, Switch, useLocation } from 'react-router-dom'\nimport React, { useEffect, useState } from 'react'\nimport { Sticky } from 'semantic-ui-react'\nimport Header from './Header'\nimport Shop from './Shop'\nimport Sell from './Sell'\nimport About from './About'\nimport Cart from './Cart'\nimport Login from './Login'\nimport shopProducts from '../Data/shopProducts'\n\nfunction App() {\n\tconst [products, setProducts] = useState([shopProducts])\n\tconst [filter, setFilter] = useState([])\n\tconst [search, setSearch] = useState('')\n\tconst [sort, setSort] = useState('')\n\tconst [sellerFilter, setSellerFilter] = useState('all')\n\tconst [cart, setCart] = useState([])\n\tconst [likes, setLikes] = useState([])\n\tconst [sellers, setSellers] = useState([])\n\tconst [currentUser, setCurrentUser] = useState(null)\n\tconst [loggedIn, setLoggedIn] = useState(false)\n\tconst location = useLocation()\n\n\tconst sellerNames = sellers.map((seller) => seller.name)\n\n\tuseEffect(() => {\n\t\tfetch(`http://localhost:3000/products`)\n\t\t\t.then((res) => res.json())\n\t\t\t.then(setProducts)\n\t}, [])\n\n\tuseEffect(() => {\n\t\tfetch(`https://api.tvmaze.com/shows/526/cast`)\n\t\t\t.then((res) => res.json())\n\t\t\t.then((data) => {\n\t\t\t\tsetSellers(data.map((item) => item.character))\n\t\t\t})\n\t}, [])\n\n\tuseEffect(() => {\n\t\tif (loggedIn) {\n\t\t\tfetch(`http://localhost:3000/users/${currentUser.user.id}`)\n\t\t\t\t.then((res) => res.json())\n\t\t\t\t.then((user) => {\n\t\t\t\t\tif (user.cart !== undefined && cart.length === 0) {\n\t\t\t\t\t\tsetCart(user.cart)\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfetch(`http://localhost:3000/users/${currentUser.user.id}`, {\n\t\t\t\t\t\t\tmethod: 'PATCH',\n\t\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t\t\t\tAuthorization: `Bearer ${currentUser.accessToken}`,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\t\t\t\tcart: cart,\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.then((res) => res.json())\n\t\t\t\t\t\t\t.then((data) => data)\n\t\t\t\t\t}\n\t\t\t\t\tif (user.likes !== undefined) {\n\t\t\t\t\t\tsetLikes(user.likes)\n\t\t\t\t\t\tsetProducts(products)\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t}\n\t}, [loggedIn])\n\n\tuseEffect(() => {\n\t\tif (sellerFilter !== 'all' && location.pathname !== '/') {\n\t\t\tsetSellerFilter('all')\n\t\t}\n\t}, [location])\n\n\tfunction addProduct(newProduct) {\n\t\tsetProducts([...products, newProduct])\n\t}\n\n\tfunction addToCart(id) {\n\t\tif (cart.includes(id)) setCart(cart)\n\t\telse setCart([...cart, id])\n\n\t\tif (loggedIn) {\n\t\t\tconst updateCart = [...cart, id]\n\t\t\tfetch(`http://localhost:3000/users/${currentUser.user.id}`, {\n\t\t\t\tmethod: 'PATCH',\n\t\t\t\theaders: {\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\tAuthorization: `Bearer ${currentUser.accessToken}`,\n\t\t\t\t},\n\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\tcart: updateCart,\n\t\t\t\t}),\n\t\t\t})\n\t\t\t\t.then((res) => res.json())\n\t\t\t\t.then((data) => data)\n\t\t}\n\t}\n\n\tfunction removeFromCart(id) {\n\t\tconst updatedCart = cart.filter((item) => item !== id)\n\t\tsetCart(updatedCart)\n\n\t\tif (loggedIn) {\n\t\t\tfetch(`http://localhost:3000/users/${currentUser.user.id}`, {\n\t\t\t\tmethod: 'PATCH',\n\t\t\t\theaders: {\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\tAuthorization: `Bearer ${currentUser.accessToken}`,\n\t\t\t\t},\n\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\tcart: updatedCart,\n\t\t\t\t}),\n\t\t\t})\n\t\t\t\t.then((res) => res.json())\n\t\t\t\t.then((data) => data)\n\t\t}\n\t}\n\n\tfunction addLikes(id) {\n\t\tif (loggedIn) {\n\t\t\tconst updateLikes = [...likes, id]\n\t\t\tfetch(`http://localhost:3000/users/${currentUser.user.id}`, {\n\t\t\t\tmethod: 'PATCH',\n\t\t\t\theaders: {\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\tAuthorization: `Bearer ${currentUser.accessToken}`,\n\t\t\t\t},\n\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\tlikes: updateLikes,\n\t\t\t\t}),\n\t\t\t})\n\t\t\t\t.then((res) => res.json())\n\t\t\t\t.then(() => setLikes([...likes, id]))\n\t\t} else {\n\t\t\talert('Login to like an item.')\n\t\t}\n\t}\n\n\tfunction removeLikes(id) {\n\t\tif (loggedIn) {\n\t\t\tconst updateLikes = likes.filter((item) => item !== id)\n\t\t\tfetch(`http://localhost:3000/users/${currentUser.user.id}`, {\n\t\t\t\tmethod: 'PATCH',\n\t\t\t\theaders: {\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\tAuthorization: `Bearer ${currentUser.accessToken}`,\n\t\t\t\t},\n\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\tlikes: updateLikes,\n\t\t\t\t}),\n\t\t\t})\n\t\t\t\t.then((res) => res.json())\n\t\t\t\t.then(() => setLikes(updateLikes))\n\t\t}\n\t}\n\n\tconst displayProducts = products\n\t\t.filter((eachProduct) => {\n\t\t\tif (filter.length < 1) {\n\t\t\t\treturn eachProduct\n\t\t\t} else {\n\t\t\t\treturn filter.includes(eachProduct.category)\n\t\t\t}\n\t\t})\n\t\t.filter((eachProduct) => {\n\t\t\tif (sellerFilter !== 'all') {\n\t\t\t\treturn eachProduct.seller === sellerFilter\n\t\t\t} else {\n\t\t\t\treturn eachProduct\n\t\t\t}\n\t\t})\n\t\t.filter((eachProduct) => {\n\t\t\tif (search) {\n\t\t\t\treturn eachProduct.title.toLowerCase().includes(search.toLowerCase())\n\t\t\t} else {\n\t\t\t\treturn eachProduct\n\t\t\t}\n\t\t})\n\t\t.sort((firstProduct, secondProduct) => {\n\t\t\tif (sort === 'relevant') {\n\t\t\t\tif (firstProduct.id > firstProduct.id) return -1\n\t\t\t} else if (sort === 'priceHighLow') {\n\t\t\t\tif (firstProduct.price > secondProduct.price) return -1\n\t\t\t} else if (sort === 'priceLowHigh') {\n\t\t\t\tif (firstProduct.price < secondProduct.price) return -1\n\t\t\t}\n\t\t})\n\n\treturn (\n\t\t<div>\n\t\t\t<Sticky>\n\t\t\t\t<Header\n\t\t\t\t\tcart={cart}\n\t\t\t\t\tloggedIn={loggedIn}\n\t\t\t\t\tsetCurrentUser={setCurrentUser}\n\t\t\t\t\tsetLoggedIn={setLoggedIn}\n\t\t\t\t\tsetCart={setCart}\n\t\t\t\t\tsetLikes={setLikes}\n\t\t\t\t/>\n\t\t\t</Sticky>\n\n\t\t\t<Switch>\n\t\t\t\t<Route path='/sell'>\n\t\t\t\t\t<Sell\n\t\t\t\t\t\taddProduct={addProduct}\n\t\t\t\t\t\tsellerNames={sellerNames}\n\t\t\t\t\t\tcurrentUser={currentUser}\n\t\t\t\t\t/>\n\t\t\t\t</Route>\n\t\t\t\t<Route path='/about'>\n\t\t\t\t\t<About\n\t\t\t\t\t\tsellers={sellers}\n\t\t\t\t\t\tsetSellerFilter={setSellerFilter}\n\t\t\t\t\t\tproducts={products}\n\t\t\t\t\t/>\n\t\t\t\t</Route>\n\t\t\t\t<Route path='/cart'>\n\t\t\t\t\t<Cart\n\t\t\t\t\t\tcart={cart}\n\t\t\t\t\t\tproducts={products}\n\t\t\t\t\t\tremoveFromCart={removeFromCart}\n\t\t\t\t\t\tsetCart={setCart}\n\t\t\t\t\t\tcurrentUser={currentUser}\n\t\t\t\t\t/>\n\t\t\t\t</Route>\n\t\t\t\t<Route path='/login'>\n\t\t\t\t\t<Login setCurrentUser={setCurrentUser} setLoggedIn={setLoggedIn} />\n\t\t\t\t</Route>\n\t\t\t\t<Route exact path='/'>\n\t\t\t\t\t<Shop\n\t\t\t\t\t\tproducts={displayProducts}\n\t\t\t\t\t\tsetFilter={setFilter}\n\t\t\t\t\t\tfilter={filter}\n\t\t\t\t\t\tsearch={search}\n\t\t\t\t\t\tsetSearch={setSearch}\n\t\t\t\t\t\taddToCart={addToCart}\n\t\t\t\t\t\tremoveFromCart={removeFromCart}\n\t\t\t\t\t\tsetSort={setSort}\n\t\t\t\t\t\tcart={cart}\n\t\t\t\t\t\tsellerNames={sellerNames}\n\t\t\t\t\t\tsetSellerFilter={setSellerFilter}\n\t\t\t\t\t\tsellerFilter={sellerFilter}\n\t\t\t\t\t\taddLikes={addLikes}\n\t\t\t\t\t\tlikes={likes}\n\t\t\t\t\t\tremoveLikes={removeLikes}\n\t\t\t\t\t/>\n\t\t\t\t</Route>\n\t\t\t</Switch>\n\t\t</div>\n\t)\n}\n\nexport default App\n"]},"metadata":{},"sourceType":"module"}